============================================================
RESULTADOS DE PRUEBA - Lambda con AgentCore Memory
Fecha: 29 de diciembre 2025
============================================================

CONFIGURACI√ìN
-------------
Lambda Original: gpbible-bedrock-processor-dev (NO MODIFICADO)
Lambda Clon:     gpbible-bedrock-processor-memory-test
Memory ID:       memory_bqdqb-jtj3lc48bl
Usuario prueba:  user-natalie-test
Regi√≥n:          us-east-1

============================================================
PRUEBA 1: Primera conversaci√≥n (sin memoria previa)
============================================================

Input:
  userId: user-natalie-test
  text: "Hola, estoy pasando por un momento dif√≠cil y necesito gu√≠a espiritual"

Logs:
  2025-12-29T17:43:17 INFO  üìö Fetching user memory...
  2025-12-29T17:43:18 INFO  No memory found or error: Actor user-natalie-test not found
  2025-12-29T17:43:18 INFO  ‚ÑπÔ∏è No previous memory for this user
  2025-12-29T17:43:18 INFO  ü§ñ Invoking Bedrock Agent...
  2025-12-29T17:43:22 INFO  Response received in 4577ms
  2025-12-29T17:43:22 INFO  üíæ Saving to AgentCore Memory...
  2025-12-29T17:43:22 ERROR Error saving to memory: STRING_VALUE cannot be converted to Date

Resultado: ‚ùå Error en timestamp (corregido despu√©s)

============================================================
PRUEBA 2: Primera conversaci√≥n (despu√©s de fix)
============================================================

Input:
  userId: user-natalie-test
  text: "Hola, estoy pasando por un momento dif√≠cil y necesito gu√≠a espiritual"

Logs:
  2025-12-29T18:01:27 INFO  üìö Fetching user memory...
  2025-12-29T18:01:27 INFO  ‚ÑπÔ∏è No previous memory for this user
  2025-12-29T18:01:27 INFO  ü§ñ Invoking Bedrock Agent...
  2025-12-29T18:01:31 INFO  Response received in 4277ms
  2025-12-29T18:01:31 INFO  üíæ Saving to AgentCore Memory...
  2025-12-29T18:01:32 INFO  ‚úÖ Memory saved for user user-natalie-test

Resultado: ‚úÖ Memoria guardada exitosamente

============================================================
PRUEBA 3: Segunda conversaci√≥n (con memoria)
============================================================

Input:
  userId: user-natalie-test
  text: "¬øQu√© vers√≠culo me recomiendas?"

Logs:
  2025-12-29T18:26:23 INFO  üìö Fetching user memory...
  2025-12-29T18:26:23 INFO  ‚úÖ Found previous conversations
  2025-12-29T18:26:27 INFO  ü§ñ Invoking Bedrock Agent...
  2025-12-29T18:26:27 INFO  Response received in 4019ms
  2025-12-29T18:26:36 INFO  üíæ Saving to AgentCore Memory...
  2025-12-29T18:26:37 INFO  ‚úÖ Memory saved for user user-natalie-test

Resultado: ‚úÖ Memoria le√≠da y nueva interacci√≥n guardada

============================================================
VERIFICACI√ìN DE MEMORIA EN AGENTCORE
============================================================

Actores: [{'actorId': 'user-natalie-test'}]

Sesiones:
  - session-test-conv-001 (creada: 2025-12-29T19:01:31)
  - session-test-conv-002 (creada: 2025-12-29T19:13:36)

Eventos en session-test-conv-001:
  - USER: "Hola, estoy pasando por un momento dif√≠cil..."
  - ASSISTANT: "Welcome! I noticed you're speaking Spanish..."

============================================================
RESUMEN
============================================================

| Funcionalidad                    | Estado |
|----------------------------------|--------|
| Leer memoria (usuario nuevo)     | ‚úÖ     |
| Guardar mensaje usuario          | ‚úÖ     |
| Guardar respuesta asistente      | ‚úÖ     |
| Leer memoria (usuario existente) | ‚úÖ     |
| Enriquecer prompt con contexto   | ‚úÖ     |
| Invocar Bedrock Agent            | ‚úÖ     |

NOTA: El error 400 del webhook es esperado porque es una prueba
sin el backend real conectado.

============================================================
PR√ìXIMOS PASOS
============================================================

1. Probar con m√°s usuarios y conversaciones
2. Validar que el contexto mejora las respuestas del agente
3. Cuando est√© listo, actualizar Lambda de producci√≥n:
   
   aws lambda update-function-code \
     --function-name gpbible-bedrock-processor-dev \
     --zip-file fileb://lambda_bedrock_with_memory/lambda_memory.zip
